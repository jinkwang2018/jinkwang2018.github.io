---
layout: post
title:  "UNIX-Regex"
date:   2018-09-13 12:00:00
author: 강진광
categories: [UNIX]
comments: true
tags:
  - UNIX
  - Regex
---
# 정규 표현식
- 정규표현식은 줄여서 정규식(영어로는 Regular Expression이고 줄여서 Regex, Regexp 등으로 불린다.) 이라고도 하는데, 컴퓨터 과학의 정규언어로부터 유래한 것으로 특정한 규칙을 가진 문자열의 집합을 표현하기 위해 쓰이는 형식언어이다.

# 정규식 기본 문법

- 정규식 기분 문법은 크게 세 가지 정도로 나눌 수 있다.

- 1. 패턴 그대로를 매칭하는 경우 : 편집기에서 “찾기” 기능을 통해서 특정 단어를 찾는 것 처럼, 단어 그대로를 패턴으로 사용하여 매치되는 영역을 찾는다.
- 2. 메타문자 및 수량 한정자를 적용하는 경우 : 정규식 패턴에 쓰이는 문자중에는 특별한 의미를 가지는 메타 문자들이 있는데, 이들을 사용하여 보다 폭넓은 패턴에 매치할 수 있다.
- 3. 그룹 및 look around 기능을 사용하는 경우 : 제법 고급 정규식이라 할 수 있는 부분으로, 패턴의 일부를 그룹으로 묶거나, 특정 패턴의 앞 뒤로 다른 패턴이 오는 조건을 더하는 경우이다.

# 정규식 메타 문자
- 메타 문자는 특정한 문자 혹은 문자 계열을 대신하여 표시하는 문자이다. 메타문자를 이용하면 특정한 규칙을 가진 여러 단어를 하나의 패턴으로 함축할 수 있다.

<br>

| 메타 문자 | 의미|예|
|---------|-----------|---------------|
| ^ |	문자열의 시작. [...] 내에서 쓰이면 “일치하지 않는“의 의미가 된다. |^http는 문자열의 맨 처음에 http가 온 경우에 매치한다. (중간에 http가 나타난 경우는 매치하지 않음) |
| $ |	문자열의 끝 | them$은 문자열이 them으로 끝난 경우에 them에 매치한다. |
| \b | 단어의 경계. 공백, 탭, 컴마, 대시 등이 올 수 있다. | \bplay\b는 play 의 양 끝에 단어 경계가 오는 경우에만 play에 매치한다. 따라서 “playground”의 play에는 매치하지 않는다. | 
| \B | \b가 아닌 것. 정규식 메타문자에서는 대소문자가 바뀌면 반대의 의미를 지니는 것들이 있다. | \bplay\B는 play뒤에 단어 경계가 아닌 것이 왔을 때 play에 매치한다. 따라서 play에는 매치하지 않지만 playground, playball의 play에는 매치한다. |
| \s | 공백문자 | 공백,탭에 매치한다. |
| \S | 공백문자가 아닌것 | 공백 문자가 아닌 모든 문자에 매치한다. |
| \d | 숫자. [0-9]와 같다. | |
| \D | 숫자가 아닌 것. [^0-9]와 같다. | |
| \w | word. 알파벳로마자에 매치한다. | |
| \W | not word. 알파벳로마자가 아닌 것에 매치한다.	 | |
| \n, \r | 개행 문자 및 캐리지 리턴에 매치한다. | |
| \ |  이스케이프 문자. 여러 메타 문자들을 이스케이프하여 그대로 사용할 수 있게 한다. | *, ?, +, [, { ,(, ), }, ], ^, $, |, \, . 등 |
| . | 임의의 문자 하나에 대응한다.  | |

# 선택 패턴
- | 문자를 이용하면 A | B 의 패턴으로 A 혹은 B에 매칭할 수 있다. 예를 들어 tomato와 potato에 모두 매칭하고 싶다면 tomato|potato 라고 쓸 수 있다.  선택 패턴은 이후에 등장하는 그룹 패턴과 관련하여 보다 강력하게 쓰일 수 있다.

- 그외의 선택패턴으로는 [ ... ]이 있다. 대괄호속에 넣은 문자 중에서 하나에 매칭하는 것이다. [cfh]all 이라는 패턴은 call, fall, hall에 모두 매치될 수 있다. 특히 선택 패턴은 A-B를 통해서 특정 범위를 표현할 수도 있는데, 숫자의 경우 [0-9],  알파벳 소문자의 경우 [a-z], 알파벳대문자의 경우 [A-Z] 와 같은 식으로 한 글자에 매칭하는 것이 가능하다. 유니코드를 지원하는 정규식에서는 [ㄱ-힣]을 이용해서 한글 한 글자에 매칭하는 것도 가능하다.

# 그룹

- 괄호는 그룹을 나타낸다. 그룹은 전체 패턴 내에서 다시 하나로 묶여지는 패턴 조각을 나타낸다. 특히 | 나 뒤에 나오는 수량 한정자를 그룹에 붙이는 형태로 많이 사용되며, 한 번 매치한 그룹이 다시 반복되어 나타나는 경우에도 사용할 수 있다.

- - (tom|pot)ato : tomato, potato에 모두 매치되는 패턴을 그룹을 써서 좀 더 줄였다.
- - (a|i){3}bc : a 혹은 i가 3개 온 후에 bc가 오는 패턴. aaabc, iiibc, aiabc, aaibc, iiabc 등에 매치된다.
- 괄호를 써서 묶은 부분은 1번부터 시작하는 그룹으로 참조할 수 있다. 앞서 매치한 그룹을 패턴 내에서 재사용하려면 \1과 같이 그룹번호를 역슬래시로 이스케이프하여 표현한다. tomato에서 to가 두 번 반복되는데 이는 다음과 같이 표현할 수 있다.

<br>

| 표현 | 의미 |
|---------|-----------|
|[ab] | a또는 b |
|[a-d]|소문자 'a'에서 'd'까지|
|[0-9]% | % 문자 앞에 하나의 숫자가 붙어 있는 패턴|
|%[^a-zA-Z]%| 두 %문자 사이에 영문자가 없는 패턴 |

# 수량 한정자

<br>

| 표현 | 의미 | 예 |
|---------|-----------|---------------|
| ? | 앞에 온 표현이 없을 수 있다는 의미. | apples?에서 s?는 s가 있거나 없을 수 있다는 의미이다. 따라서 이 패턴은 apple, apples에 모두 매칭된다. |
| * | 앞의 표현이 0개 이상이다. |n\d*는 숫자가 0개 이상이라는 의미로 n, n0, n12, n42435453 등에 매치될 수 있다. |
| + | 앞의 표현이 1개 이상이다. |n\d+는 숫자가 1개 이상 따라온다는 의미. n은 매치하지 않으며 n0, n12, n3435345 등이 매치된다. |
| {n} | 앞의 표현이 n개이다. | n\d{3}은 n 뒤에 숫자가 3개 온다는 의미로 n, n1, n35245 는 매치하지 않으며 n123은 매치한다. |
| {n,} | 	앞의 표현이 n개 이상이다. |
| {n,m} | 앞의 표현이 n개 이상, m개 이하이다. | 수량이 n~m 사이에 있는 조건 |
